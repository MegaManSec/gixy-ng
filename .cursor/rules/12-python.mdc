---
description: Python interpreter and tooling (Always)
globs:
alwaysApply: true
---

- Use the Python interpreter at `${env:HOME}/.virtualenvs/gixy/bin/python` for all Python execution in this workspace.
- When running tests, use: `${env:HOME}/.virtualenvs/gixy/bin/python -m pytest` (not bare `pytest`).
- When invoking scripts or modules (formatters, linters, CLI tools), call them via the interpreter: `${env:HOME}/.virtualenvs/gixy/bin/python -m <module>`.
- Prefer this interpreter for local runs, CI, and any automation unless explicitly overridden.

- Prefer direct attribute access and known types in Python code:
  - Avoid `getattr` when attributes are known at development time; use direct access (e.g., `obj.attr`).
  - Avoid unnecessary `isinstance` checks when the type is guaranteed by control flow; rely on structural expectations.
  - Reserve `getattr`/`isinstance` for boundary code (untrusted input, optional 3rdâ€‘party APIs, or dynamic attribute names).
  - Examples (good): `effective_location.modifier == '='`, `rewrite.pattern == '^' and rewrite.replace == '$request_uri'`.
  - Examples (avoid): `getattr(effective_location, 'modifier', None) == '='`, redundant `isinstance` right after filtering by directive name.
